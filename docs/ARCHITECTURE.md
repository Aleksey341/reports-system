# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   index.html â”‚  â”‚ dashboard   â”‚  â”‚   form.html â”‚             â”‚
â”‚  â”‚   (Login)    â”‚  â”‚   .html     â”‚  â”‚   (1-Ğ“ĞœĞ£)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                 â”‚                 â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                  â”‚                 â”‚                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚         â”‚      Vanilla JavaScript            â”‚                    â”‚
â”‚         â”‚   + Chart.js 4.x + Canvas API     â”‚                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                          â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTPS
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API LAYER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    server.js (Express)                     â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â€¢ Helmet (Security)                                      â”‚  â”‚
â”‚  â”‚  â€¢ Rate Limiting (1000 req/15min)                         â”‚  â”‚
â”‚  â”‚  â€¢ Express-session (HTTP-only cookies)                    â”‚  â”‚
â”‚  â”‚  â€¢ CORS                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ routes/      â”‚  â”‚ middleware/  â”‚  â”‚   config/    â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚          â”‚
â”‚  â”‚ â€¢ auth.js    â”‚  â”‚ â€¢ auth.js    â”‚  â”‚ â€¢ database   â”‚          â”‚
â”‚  â”‚ â€¢ admin.js   â”‚  â”‚   - requireAuthâ”‚  â”‚   .js      â”‚          â”‚
â”‚  â”‚ â€¢ gibdd.js   â”‚  â”‚   - requireAdminâ”‚ â”‚   - pool   â”‚          â”‚
â”‚  â”‚ â€¢ services.jsâ”‚  â”‚   - requireRoleâ”‚  â”‚   - poolRO â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                               â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚ TCP/IP
                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DATABASE LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           PostgreSQL 17.5 (CNPG Cluster)                   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚   RW Host    â”‚  â”‚   RO Host    â”‚  â”‚   R Host     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  (Write)     â”‚  â”‚   (Read)     â”‚  â”‚  (Replica)   â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Tables:                                                   â”‚  â”‚
â”‚  â”‚  â€¢ municipalities (18 rows)                                â”‚  â”‚
â”‚  â”‚  â€¢ users (admin, governor, 18 operators)                   â”‚  â”‚
â”‚  â”‚  â€¢ indicators_catalog (35 indicators)                      â”‚  â”‚
â”‚  â”‚  â€¢ indicator_values (Ñ„Ğ¾Ñ€Ğ¼Ğ° 1-Ğ“ĞœĞ£ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)                  â”‚  â”‚
â”‚  â”‚  â€¢ services_catalog (35 services, 7 categories)           â”‚  â”‚
â”‚  â”‚  â€¢ service_values (dashboard data)                         â”‚  â”‚
â”‚  â”‚  â€¢ gibdd_reports (Ğ”Ğ¢ĞŸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)                             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Triggers:                                                 â”‚  â”‚
â”‚  â”‚  â€¢ trigger_sync_to_service_values                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ° (v2.2)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DASHBOARD.HTML                              â”‚
â”‚                   (Ğ¢Ñ€Ñ‘Ñ…ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 1    â”‚    â”‚  Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 2    â”‚    â”‚  Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ 3    â”‚
â”‚   "ĞĞ±Ğ·Ğ¾Ñ€"     â”‚    â”‚  Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ    â”‚    â”‚  Drill-down   â”‚
â”‚               â”‚    â”‚   Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸     â”‚    â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚    â”‚               â”‚    â”‚               â”‚
â”‚ 4 KPI         â”‚    â”‚ ğŸš— Ğ”Ğ¢ĞŸ        â”‚    â”‚ ĞšĞ»Ğ¸Ğº Ğ½Ğ°       â”‚
â”‚ + Sparklines  â”‚â”€â”€â”€â–¶â”‚ â€¢ 3 KPI       â”‚â”€â”€â”€â–¶â”‚ Heatmap       â”‚
â”‚               â”‚    â”‚ â€¢ Heatmap     â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶     â”‚
â”‚ 2 Mini-graphs â”‚    â”‚ â€¢ 8 Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ²  â”‚    â”‚ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ     â”‚
â”‚               â”‚    â”‚               â”‚    â”‚ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹       â”‚
â”‚ Quick Links   â”‚    â”‚ ğŸ“‹ Ğ£ÑĞ»ÑƒĞ³Ğ¸     â”‚    â”‚               â”‚
â”‚               â”‚    â”‚ â€¢ 4 KPI       â”‚    â”‚ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ  â”‚
â”‚               â”‚    â”‚ â€¢ 4 Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ°   â”‚    â”‚ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸       â”‚
â”‚               â”‚    â”‚               â”‚    â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ°

```
User Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ /dashboard
         â”‚
         â–¼
   checkAuth()
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
   NO        YES
    â”‚         â”‚
    â–¼         â–¼
  Login   loadOverviewData()
  Modal        â”‚
               â”œâ”€â–¶ Fetch /api/services-dashboard/data
               â”‚   â””â”€â–¶ PostgreSQL (poolRO)
               â”‚       â””â”€â–¶ SELECT service_values + JOIN
               â”‚
               â”œâ”€â–¶ Fetch /api/gibdd/data
               â”‚   â””â”€â–¶ PostgreSQL (poolRO)
               â”‚       â””â”€â–¶ SELECT gibdd_reports + JOIN
               â”‚
               â”œâ”€â–¶ updateKPI() â†’ animateValue()
               â”‚                   â””â”€â–¶ 800ms ÑÑ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº
               â”‚
               â”œâ”€â–¶ drawSparkline() â†’ Canvas API
               â”‚                     â””â”€â–¶ 120Ã—30px trend
               â”‚
               â””â”€â–¶ renderOverviewServicesChart()
                   â””â”€â–¶ Chart.js â†’ fade-in 400ms
```

### 2. Quick Filter â†’ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
User ĞºĞ»Ğ¸ĞºĞ°ĞµÑ‚ "ğŸ“Š Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»"
         â”‚
         â–¼
  applyQuickFilter('current-quarter')
         â”‚
         â”œâ”€â–¶ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ñ‚Ñ‹ (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ³Ğ¾Ğ´, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 3 Ğ¼ĞµÑ)
         â”œâ”€â–¶ Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ custom filters
         â”œâ”€â–¶ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ°ÑÑ .active
         â”‚
         â–¼
  refreshDashboard()
         â”‚
         â”œâ”€â–¶ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ .updating â†’ pulse animation
         â”‚
         â”œâ”€â–¶ Promise.all([
         â”‚     renderMonthlyDynamics(),
         â”‚     renderHeatmapDTP(),
         â”‚     renderPeriodComparison(),
         â”‚     ...8 Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ²
         â”‚   ])
         â”‚
         â”œâ”€â–¶ ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº:
         â”‚   â€¢ fetch('/api/gibdd/data?period=...')
         â”‚   â€¢ updateChart() â†’ fade-in 400ms
         â”‚   â€¢ Chart.js animation: 800ms easeInOutQuart
         â”‚
         â””â”€â–¶ Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ .updating Ğ¿Ğ¾ÑĞ»Ğµ 1500ms
```

### 3. Heatmap â†’ Drill-down

```
User ĞºĞ»Ğ¸ĞºĞ°ĞµÑ‚ Ğ½Ğ° ÑÑ‡ĞµĞ¹ĞºÑƒ Heatmap
         â”‚
         â–¼
  onHeatmapClick(municipalityId, month)
         â”‚
         â”œâ”€â–¶ $('#municipality').value = municipalityId
         â”œâ”€â–¶ $('#month').value = month
         â”œâ”€â–¶ ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ° "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ" filter
         â”œâ”€â–¶ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ custom filters
         â”‚
         â–¼
  loadKPIData() + refreshDashboard()
         â”‚
         â”œâ”€â–¶ Fetch Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸
         â”œâ”€â–¶ updateKPI() â†’ animateValue() Ğ´Ğ»Ñ Ğ²ÑĞµÑ… 3 KPI
         â”œâ”€â–¶ ĞŸĞµÑ€ĞµÑ€Ğ¸ÑĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ 8 Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ²
         â”‚
         â””â”€â–¶ showBanner("Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ñ‹: ...")
             â””â”€â–¶ ĞĞ²Ñ‚Ğ¾ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· 2000ms
```

## ğŸ—„ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE SCHEMA                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

municipalities               users                  indicators_catalog
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id (PK)      â”‚            â”‚ id (PK)      â”‚       â”‚ id (PK)      â”‚
â”‚ name         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ municipality â”‚       â”‚ name         â”‚
â”‚ code         â”‚            â”‚   _id (FK)   â”‚       â”‚ unit         â”‚
â”‚ region       â”‚            â”‚ password_hashâ”‚       â”‚ category     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ role         â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ is_active    â”‚              â”‚
                            â”‚ password_    â”‚              â”‚
                            â”‚   reset_req  â”‚              â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                                          â”‚
indicator_values                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ id (PK)              â”‚                                 â”‚
â”‚ municipality_id (FK) â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ service_id (FK)      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚ indicator_id (FK)    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ period_year          â”‚        â”‚
â”‚ period_month         â”‚        â”‚
â”‚ value_numeric        â”‚        â”‚
â”‚ created_at           â”‚        â”‚
â”‚ updated_at           â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
         â”‚                      â”‚
         â”‚ TRIGGER              â”‚
         â”‚ sync_to_service      â”‚
         â”‚                      â”‚
         â–¼                      â”‚
service_values                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ id (PK)              â”‚        â”‚
â”‚ municipality_id (FK) â”‚        â”‚
â”‚ service_id (FK)      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ period_year          â”‚
â”‚ period_month         â”‚
â”‚ value_numeric        â”‚
â”‚ created_at           â”‚
â”‚ updated_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€â”€â–¶ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ° "Ğ£ÑĞ»ÑƒĞ³Ğ¸"


services_catalog
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id (PK)      â”‚
â”‚ name         â”‚
â”‚ category     â”‚
â”‚ description  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â–¶ 35 services in 7 categories:
            â€¢ ĞœĞ¤Ğ¦
            â€¢ Ğ—ĞĞ“Ğ¡
            â€¢ Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
            â€¢ Ğ–ĞšĞ¥
            â€¢ ĞĞ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
            â€¢ Ğ—Ğ´Ñ€Ğ°Ğ²Ğ¾Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
            â€¢ ĞšÑƒĞ»ÑŒÑ‚ÑƒÑ€Ğ° Ğ¸ ÑĞ¿Ğ¾Ñ€Ñ‚


gibdd_reports
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id (PK)              â”‚
â”‚ municipality_id (FK) â”‚
â”‚ period_year          â”‚
â”‚ period_month         â”‚
â”‚ dtp_total            â”‚
â”‚ dtp_total_dead       â”‚
â”‚ dtp_total_injured    â”‚
â”‚ dtp_collision        â”‚
â”‚ dtp_pedestrian       â”‚
â”‚ ... (30+ fields)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Frontend Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND COMPONENTS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

public/
â”‚
â”œâ”€â”€ index.html                    [ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ + Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ]
â”‚   â”œâ”€â”€ Modal login window
â”‚   â”œâ”€â”€ Role-based cards
â”‚   â””â”€â”€ Theme switcher
â”‚
â”œâ”€â”€ dashboard.html                [Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´] â˜…â˜…â˜…
â”‚   â”‚
â”‚   â”œâ”€â”€ TAB 1: "ĞĞ±Ğ·Ğ¾Ñ€" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚   â”œâ”€â”€ 4 KPI cards                        â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Services (Ñ YoY)               â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Ğ”Ğ¢ĞŸ (Ñ Ñ‚Ñ€ĞµĞ½Ğ´Ğ¾Ğ¼)                â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ĞŸĞ¾Ğ³Ğ¸Ğ±ÑˆĞ¸Ğµ                       â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Ğ Ğ°Ğ½ĞµĞ½Ğ¾                         â”‚
â”‚   â”‚   â”œâ”€â”€ Sparklines (Canvas API)            â”‚
â”‚   â”‚   â”œâ”€â”€ 2 mini graphs (Chart.js)           â”‚
â”‚   â”‚   â””â”€â”€ Quick links                        â”‚
â”‚   â”‚                                           â”‚
â”‚   â”œâ”€â”€ TAB 2: "Ğ”Ğ¢ĞŸ (Ğ“Ğ˜Ğ‘Ğ”Ğ”)" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”‚   â”œâ”€â”€ 3 KPI cards (Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹)          â”‚
â”‚   â”‚   â”œâ”€â”€ Heatmap 10Ã—12 (6 levels)           â”‚
â”‚   â”‚   â”‚   â””â”€â”€ onclick â†’ drill-down           â”‚
â”‚   â”‚   â””â”€â”€ 8 charts:                          â”‚
â”‚   â”‚       â”œâ”€â”€ Monthly dynamics (line)        â”‚
â”‚   â”‚       â”œâ”€â”€ Period comparison (bar)        â”‚
â”‚   â”‚       â”œâ”€â”€ Top municipalities (bar)       â”‚
â”‚   â”‚       â”œâ”€â”€ Accident categories (pie)      â”‚
â”‚   â”‚       â”œâ”€â”€ Locations (doughnut)           â”‚
â”‚   â”‚       â”œâ”€â”€ Victims by age (bar)           â”‚
â”‚   â”‚       â””â”€â”€ Special cases (doughnut)       â”‚
â”‚   â”‚                                           â”‚
â”‚   â”œâ”€â”€ TAB 3: "Ğ£ÑĞ»ÑƒĞ³Ğ¸" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”‚   â”œâ”€â”€ 4 KPI cards                        â”‚
â”‚   â”‚   â””â”€â”€ 4 charts:                          â”‚
â”‚   â”‚       â”œâ”€â”€ Monthly dynamics               â”‚
â”‚   â”‚       â”œâ”€â”€ Top-10 services                â”‚
â”‚   â”‚       â”œâ”€â”€ Categories (pie)               â”‚
â”‚   â”‚       â””â”€â”€ Municipalities comparison      â”‚
â”‚   â”‚                                           â”‚
â”‚   â”œâ”€â”€ Quick Filters (5 buttons)              â”‚
â”‚   â”‚   â”œâ”€â”€ Current month                      â”‚
â”‚   â”‚   â”œâ”€â”€ Current quarter                    â”‚
â”‚   â”‚   â”œâ”€â”€ Current year (default)             â”‚
â”‚   â”‚   â”œâ”€â”€ Last year                          â”‚
â”‚   â”‚   â””â”€â”€ Custom                             â”‚
â”‚   â”‚                                           â”‚
â”‚   â””â”€â”€ Animations & Effects                   â”‚
â”‚       â”œâ”€â”€ animateValue() - 800ms counter     â”‚
â”‚       â”œâ”€â”€ updateChart() - fade-in 400ms      â”‚
â”‚       â”œâ”€â”€ Chart.js - easeInOutQuart 800ms    â”‚
â”‚       â”œâ”€â”€ pulse indicator                    â”‚
â”‚       â”œâ”€â”€ scale-in Ğ´Ğ»Ñ KPI                   â”‚
â”‚       â””â”€â”€ shimmer skeleton                   â”‚
â”‚
â”œâ”€â”€ form.html                     [Ğ¤Ğ¾Ñ€Ğ¼Ğ° 1-Ğ“ĞœĞ£]
â”‚   â””â”€â”€ Excel import
â”‚
â”œâ”€â”€ gibdd.html                    [Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ“Ğ˜Ğ‘Ğ”Ğ”]
â”‚   â””â”€â”€ Ğ”Ğ¢ĞŸ reporting
â”‚
â”œâ”€â”€ finance.html                  [Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹]
â”‚
â”œâ”€â”€ change-password.html          [Ğ¡Ğ¼ĞµĞ½Ğ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ]
â”‚
â”œâ”€â”€ theme.js                      [Ğ¢ĞµĞ¼Ñ‹: dark/light]
â”‚   â”œâ”€â”€ localStorage persistence
â”‚   â””â”€â”€ Auto-update charts
â”‚
â””â”€â”€ styles.css                    [Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸]
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LEVEL 1: Transport
â”œâ”€â”€ HTTPS (TLS 1.2+)
â””â”€â”€ Strict-Transport-Security header

LEVEL 2: Application
â”œâ”€â”€ Helmet
â”‚   â”œâ”€â”€ Content-Security-Policy
â”‚   â”œâ”€â”€ X-Frame-Options: DENY
â”‚   â”œâ”€â”€ X-Content-Type-Options: nosniff
â”‚   â””â”€â”€ X-XSS-Protection
â”œâ”€â”€ Rate Limiting
â”‚   â””â”€â”€ 1000 requests / 15 minutes per IP
â””â”€â”€ CORS
    â””â”€â”€ Same-origin policy

LEVEL 3: Authentication
â”œâ”€â”€ bcrypt (10 rounds)
â”‚   â””â”€â”€ Password hashing
â”œâ”€â”€ Express-session
â”‚   â”œâ”€â”€ HTTP-only cookies
â”‚   â”œâ”€â”€ Secure flag (production)
â”‚   â”œâ”€â”€ SameSite: strict
â”‚   â””â”€â”€ Session timeout
â””â”€â”€ Password policies
    â”œâ”€â”€ Min 6 characters
    â”œâ”€â”€ password_reset_required flag
    â””â”€â”€ last_password_change tracking

LEVEL 4: Authorization
â”œâ”€â”€ Middleware chain
â”‚   â”œâ”€â”€ requireAuth()
â”‚   â”œâ”€â”€ requireAdmin()
â”‚   â”œâ”€â”€ requireRole(role)
â”‚   â””â”€â”€ requireMunicipalityAccess()
â””â”€â”€ Role hierarchy
    â”œâ”€â”€ admin (full access)
    â”œâ”€â”€ governor (read-only dashboard)
    â””â”€â”€ operator (own municipality only)

LEVEL 5: Database
â”œâ”€â”€ Parameterized queries (SQL injection prevention)
â”œâ”€â”€ Read/Write separation
â”‚   â”œâ”€â”€ pool (RW) - Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
â”‚   â””â”€â”€ poolRO (RO) - Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ Foreign key constraints
â””â”€â”€ UNIQUE constraints
```

## ğŸ“Š Performance optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PERFORMANCE STRATEGIES                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATABASE
â”œâ”€â”€ Connection pooling
â”‚   â”œâ”€â”€ pool (RW): min 2, max 10
â”‚   â””â”€â”€ poolRO (RO): min 2, max 20
â”œâ”€â”€ Read replica usage
â”‚   â””â”€â”€ 80% Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² â†’ poolRO
â”œâ”€â”€ Indexes
â”‚   â”œâ”€â”€ municipalities (id)
â”‚   â”œâ”€â”€ users (municipality_id)
â”‚   â”œâ”€â”€ indicator_values (municipality_id, period)
â”‚   â””â”€â”€ service_values (municipality_id, service_id, period)
â””â”€â”€ Query optimization
    â””â”€â”€ JOINs only when necessary

FRONTEND
â”œâ”€â”€ Canvas API Ğ´Ğ»Ñ sparklines
â”‚   â””â”€â”€ 3Ã— Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ SVG
â”œâ”€â”€ Chart.js lazy loading
â”‚   â””â”€â”€ Charts Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸
â”œâ”€â”€ Skeleton loading
â”‚   â””â”€â”€ ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ UI feedback
â”œâ”€â”€ requestAnimationFrame
â”‚   â””â”€â”€ 60 FPS Ğ´Ğ»Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¹
â””â”€â”€ CSS animations
    â””â”€â”€ GPU-accelerated (transform, opacity)

CACHING
â”œâ”€â”€ Session cache (in-memory)
â”œâ”€â”€ Static assets caching
â””â”€â”€ Browser localStorage
    â””â”€â”€ Theme preference
```

## ğŸš€ Deployment (Amvera Cloud)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AMVERA DEPLOYMENT                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GitHub Repository
      â”‚
      â”‚ git push
      â”‚
      â–¼
Amvera CI/CD Pipeline
      â”‚
      â”œâ”€â–¶ npm install
      â”œâ”€â–¶ Health check
      â”‚
      â–¼
Docker Container (Node.js 18)
      â”‚
      â”œâ”€â”€ Environment Variables
      â”‚   â”œâ”€â”€ DB_HOST_RW
      â”‚   â”œâ”€â”€ DB_HOST_RO
      â”‚   â”œâ”€â”€ DB_HOST_R
      â”‚   â”œâ”€â”€ DB_PASSWORD
      â”‚   â”œâ”€â”€ SESSION_SECRET
      â”‚   â””â”€â”€ NODE_ENV=production
      â”‚
      â”œâ”€â”€ Expose PORT 80
      â”‚
      â””â”€â”€ Start: npm start
            â””â”€â–¶ node server.js

PostgreSQL CNPG Cluster
      â”‚
      â”œâ”€â”€ Primary (RW)
      â”œâ”€â”€ Standby (RO)
      â””â”€â”€ Replica (R)

Load Balancer
      â”‚
      â””â”€â–¶ HTTPS â†’ reports-system-alex1976.amvera.io
```

## ğŸ“ˆ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

```
Health Check Endpoint: /health
      â”‚
      â”œâ”€â–¶ Status: ok/error
      â”œâ”€â–¶ Database: connected/disconnected
      â”œâ”€â–¶ Uptime: seconds
      â””â”€â–¶ Timestamp: ISO 8601

Logs:
      â”œâ”€â”€ [SQL] - Database queries
      â”œâ”€â”€ [AUTH] - Authentication events
      â”œâ”€â”€ [ERROR] - Stack traces
      â””â”€â”€ HTTP access logs
```

## ğŸ”„ Data Flow Ğ´Ğ»Ñ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ° ÑƒÑĞ»ÑƒĞ³

```
User Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ /form.html
      â”‚
      â–¼
Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Excel Ñ„Ğ°Ğ¹Ğ»
      â”‚
      â”œâ”€â–¶ POST /api/import/service-values
      â”‚   â””â”€â–¶ ExcelJS Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ Ñ„Ğ°Ğ¹Ğ»
      â”‚       â””â”€â–¶ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
      â”‚           â””â”€â–¶ INSERT INTO indicator_values
      â”‚
      â–¼
TRIGGER: trigger_sync_to_service_values
      â”‚
      â”œâ”€â–¶ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ Ğ² service_values
      â”‚   â””â”€â–¶ SUM(value_numeric) GROUP BY service_id
      â”‚
      â–¼
Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ğ² Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğµ
      â”‚
      â””â”€â–¶ /api/services-dashboard/data
          â””â”€â–¶ SELECT FROM service_values
              â””â”€â–¶ Chart.js Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ°
```

---

**ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°**: v2.2
**Ğ”Ğ°Ñ‚Ğ°**: Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ 2025
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ**: Production Ready âœ…
